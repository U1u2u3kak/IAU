<!DOCTYPE html>
<html lang="ar">
<head>
    <script src="https://fpyf8.com/88/tag.min.js" data-zone="160468" async data-cfasync="false"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ŸÑÿπÿ®ÿ© ÿßŸÑÿ´ÿπÿ®ÿßŸÜ ŸÑŸÑÿ¨ŸàÿßŸÑ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            height: 100vh;
            display: flex;
            flex-direction: column;
            color: #fff;
            direction: rtl;
            overflow: hidden;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            text-align: center;
            border-bottom: 2px solid #ffcc00;
        }
        
        .title {
            font-size: 1.5rem;
            color: #ffcc00;
            margin-bottom: 5px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 5px 0;
        }
        
        .stat-box {
            background: rgba(255, 204, 0, 0.15);
            padding: 8px 12px;
            border-radius: 20px;
            text-align: center;
            min-width: 80px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffcc00;
        }
        
        .game-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        #gameCanvas {
            background: #000;
            border: 3px solid #ffcc00;
            border-radius: 10px;
            max-width: 100%;
            max-height: 70vh;
            aspect-ratio: 1/1;
        }
        
        .controls-bottom {
            background: rgba(0, 0, 0, 0.85);
            padding: 15px 10px;
            border-top: 2px solid #ffcc00;
        }
        
        .main-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .btn {
            background: linear-gradient(to bottom, #ffcc00, #ff9900);
            color: #000;
            border: none;
            padding: 12px 5px;
            font-size: 0.9rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .btn i {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-primary {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(to bottom, #2196F3, #0D47A1);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(to bottom, #ff5722, #c41c00);
            color: white;
        }
        
        .arrow-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 0 auto;
        }
        
        .arrow-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid #ffcc00;
            border-radius: 10px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            color: #ffcc00;
        }
        
        .arrow-btn.up {
            grid-column: 2;
            grid-row: 1;
        }
        
        .arrow-btn.left {
            grid-column: 1;
            grid-row: 2;
        }
        
        .arrow-btn.down {
            grid-column: 2;
            grid-row: 2;
        }
        
        .arrow-btn.right {
            grid-column: 3;
            grid-row: 2;
        }
        
        .ad-section {
            background: linear-gradient(45deg, #ff8c00, #ff2d55);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }
        
        .ad-content {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .ad-text {
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .ad-timer {
            font-size: 1.1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 15px;
            border-radius: 50px;
            display: inline-block;
        }
        
        @media (max-height: 700px) {
            .header {
                padding: 5px;
            }
            
            .title {
                font-size: 1.2rem;
            }
            
            .stat-box {
                padding: 5px 8px;
                min-width: 70px;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 8px 3px;
                font-size: 0.8rem;
                min-height: 50px;
            }
            
            .btn i {
                font-size: 1.2rem;
            }
            
            .arrow-btn {
                height: 50px;
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 400px) {
            .main-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn {
                font-size: 0.8rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="title">üêç ŸÑÿπÿ®ÿ© ÿßŸÑÿ´ÿπÿ®ÿßŸÜ ŸÑŸÑÿ¨ŸàÿßŸÑ</div>
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
                <div id="score" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ÿßŸÑÿ£ÿπŸÑŸâ</div>
                <div id="highScore" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ÿßŸÑÿ≠Ÿäÿßÿ©</div>
                <div id="lives" class="stat-value">3</div>
            </div>
        </div>
    </div>
    
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
    </div>
    
    <div class="controls-bottom">
        <div class="main-buttons">
            <button id="startBtn" class="btn btn-primary">
                <i class="fas fa-play"></i> ÿ®ÿØÿ°
            </button>
            <button id="pauseBtn" class="btn btn-secondary">
                <i class="fas fa-pause"></i> ÿ•ŸäŸÇÿßŸÅ
            </button>
            <button id="restartBtn" class="btn btn-warning">
                <i class="fas fa-redo"></i> ÿ•ÿπÿßÿØÿ©
            </button>
            <button id="helpBtn" class="btn btn-secondary">
                <i class="fas fa-question"></i> ŸÖÿ≥ÿßÿπÿØÿ©
            </button>
        </div>
        
        <div class="arrow-controls">
            <div class="arrow-btn up" id="upBtn">
                <i class="fas fa-arrow-up"></i>
            </div>
            <div class="arrow-btn left" id="leftBtn">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="arrow-btn down" id="downBtn">
                <i class="fas fa-arrow-down"></i>
            </div>
            <div class="arrow-btn right" id="rightBtn">
                <i class="fas fa-arrow-right"></i>
            </div>
        </div>
        
        <div class="ad-section" id="adContainer">
            <div class="ad-content">
                <div class="ad-text">ÿ¥ÿßŸáÿØ ÿ•ÿπŸÑÿßŸÜŸãÿß ŸÑÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ≠Ÿäÿßÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©!</div>
                <div class="ad-timer" id="adTimer">5</div>
            </div>
            <button id="adBtn" class="btn btn-secondary" style="width:100%;">
                <i class="fas fa-ad"></i> ÿ¥ÿßŸáÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ¢ŸÜ
            </button>
        </div>
    </div>

    <script>
        // ÿ™ŸáŸäÿ¶ÿ© ÿπŸÜÿßÿµÿ± DOM
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const livesElement = document.getElementById('lives');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const helpBtn = document.getElementById('helpBtn');
        const adContainer = document.getElementById('adContainer');
        const adBtn = document.getElementById('adBtn');
        const adTimer = document.getElementById('adTimer');
        const upBtn = document.getElementById('upBtn');
        const downBtn = document.getElementById('downBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        
        // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©
        const gridSize = 20;
        let tileCount;
        let canvasSize;
        let snake = [];
        let food = {};
        let dx = 0;
        let dy = 0;
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let lives = 3;
        let gameSpeed = 150;
        let gameInterval;
        let gameRunning = false;
        let gamePaused = false;
        let adCountdown;
        
        // ÿ™ŸáŸäÿ¶ÿ© ÿ≠ÿ¨ŸÖ ÿßŸÑŸÑŸàÿ≠ÿ©
        function initCanvasSize() {
            const container = document.querySelector('.game-container');
            const size = Math.min(container.clientWidth, container.clientHeight * 0.8);
            canvas.width = size;
            canvas.height = size;
            canvasSize = size;
            tileCount = Math.floor(canvasSize / gridSize);
            
            // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÑÿπÿ®ÿ© ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÇŸäÿØ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ
            if (gameRunning) {
                resetGame();
            } else {
                drawGame();
            }
        }
        
        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÑÿπÿ®ÿ©
        function init() {
            // ÿ™ÿπŸäŸäŸÜ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÑŸàÿ≠ÿ©
            initCanvasSize();
            window.addEventListener('resize', initCanvasSize);
            
            // ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÇŸäÿßÿ≥Ÿäÿ©
            highScoreElement.textContent = highScore;
            livesElement.textContent = lives;
            
            // ÿ™ÿπŸäŸäŸÜ ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
            startBtn.addEventListener('click', startGame);
            pauseBtn.addEventListener('click', togglePause);
            restartBtn.addEventListener('click', restartGame);
            helpBtn.addEventListener('click', showHelp);
            adBtn.addEventListener('click', showAd);
            
            // ÿ™ÿπŸäŸäŸÜ ÿ£ÿ≠ÿØÿßÿ´ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ£ÿ≥ŸáŸÖ
            upBtn.addEventListener('click', () => changeDirection(0, -1));
            downBtn.addEventListener('click', () => changeDirection(0, 1));
            leftBtn.addEventListener('click', () => changeDirection(-1, 0));
            rightBtn.addEventListener('click', () => changeDirection(1, 0));
            
            // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ∂ÿ∫ÿ∑ÿßÿ™ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
            document.addEventListener('keydown', handleKeyPress);
            
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÑŸàÿ≠ÿ©
            drawGame();
        }
        
        // ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ©
        function startGame() {
            if (gameRunning) return;
            
            resetGame();
            gameRunning = true;
            gamePaused = false;
            startBtn.disabled = true;
            pauseBtn.textContent = "ÿ•ŸäŸÇÿßŸÅ";
            pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ÿ•ŸäŸÇÿßŸÅ';
            adContainer.style.display = "none";
            
            gameInterval = setInterval(gameLoop, gameSpeed);
        }
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÑÿπÿ®ÿ©
        function restartGame() {
            clearInterval(gameInterval);
            gameRunning = false;
            startBtn.disabled = false;
            adContainer.style.display = "none";
            startGame();
        }
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÑÿπÿ®ÿ©
        function resetGame() {
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ´ÿπÿ®ÿßŸÜ
            snake = [
                {x: Math.floor(tileCount/2), y: Math.floor(tileCount/2)},
                {x: Math.floor(tileCount/2)-1, y: Math.floor(tileCount/2)},
                {x: Math.floor(tileCount/2)-2, y: Math.floor(tileCount/2)}
            ];
            
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ∑ÿπÿßŸÖ
            generateFood();
            
            // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿßÿ™ÿ¨ÿßŸá
            dx = 1;
            dy = 0;
            
            // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
            score = 0;
            scoreElement.textContent = score;
            lives = 3;
            livesElement.textContent = lives;
        }
        
        // ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ∑ÿπÿßŸÖ ŸÅŸä ŸÖŸÉÿßŸÜ ÿπÿ¥Ÿàÿßÿ¶Ÿä
        function generateFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            
            // ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ∑ÿπÿßŸÖ ŸÑÿß Ÿäÿ∏Ÿáÿ± ÿπŸÑŸâ ÿßŸÑÿ´ÿπÿ®ÿßŸÜ
            for (let segment of snake) {
                if (segment.x === food.x && segment.y === food.y) {
                    return generateFood();
                }
            }
        }
        
        // ÿ≠ŸÑŸÇÿ© ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
        function gameLoop() {
            if (gamePaused) return;
            
            moveSnake();
            checkCollision();
            drawGame();
        }
        
        // ÿ≠ÿ±ŸÉÿ© ÿßŸÑÿ´ÿπÿ®ÿßŸÜ
        function moveSnake() {
            // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ£ÿ≥ ÿ¨ÿØŸäÿØ
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÉŸÑ ÿßŸÑÿ∑ÿπÿßŸÖ
            if (head.x === food.x && head.y === food.y) {
                // ÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©
                score += 10;
                scoreElement.textContent = score;
                
                // ÿ™ŸàŸÑŸäÿØ ÿ∑ÿπÿßŸÖ ÿ¨ÿØŸäÿØ
                generateFood();
            } else {
                // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ∞ŸäŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ£ŸÉŸÑ
                snake.pop();
            }
        }
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿµÿßÿØŸÖ
        function checkCollision() {
            const head = snake[0];
            
            // ÿßŸÑÿ™ÿµÿßÿØŸÖ ŸÖÿπ ÿßŸÑÿ¨ÿØÿ±ÿßŸÜ
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                loseLife();
                return;
            }
            
            // ÿßŸÑÿ™ÿµÿßÿØŸÖ ŸÖÿπ ÿßŸÑÿ∞ŸäŸÑ
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    loseLife();
                    return;
                }
            }
        }
        
        // ŸÅŸÇÿØÿßŸÜ ÿ≠Ÿäÿßÿ©
        function loseLife() {
            lives--;
            livesElement.textContent = lives;
            
            if (lives > 0) {
                // ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿπ ÿ≠Ÿäÿßÿ© ÿ£ŸÇŸÑ
                resetGame();
            } else {
                // ŸÜŸáÿßŸäÿ© ÿßŸÑŸÑÿπÿ®ÿ©
                gameOver();
            }
        }
        
        // ŸÜŸáÿßŸäÿ© ÿßŸÑŸÑÿπÿ®ÿ©
        function gameOver() {
            clearInterval(gameInterval);
            gameRunning = false;
            startBtn.disabled = false;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÇŸäÿßÿ≥Ÿäÿ©
            if (score > highScore) {
                highScore = score;
                highScoreElement.textContent = highScore;
                localStorage.setItem('snakeHighScore', highScore);
            }
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑŸÖŸÉÿßŸÅÿ¶
            adContainer.style.display = "block";
            startAdCountdown();
        }
        
        // ÿ®ÿØÿ° ÿπÿØ ÿ™ŸÜÿßÿ≤ŸÑŸä ŸÑŸÑÿ•ÿπŸÑÿßŸÜ
        function startAdCountdown() {
            let count = 5;
            adTimer.textContent = count;
            
            adCountdown = setInterval(() => {
                count--;
                adTimer.textContent = count;
                
                if (count <= 0) {
                    clearInterval(adCountdown);
                    showAd();
                }
            }, 1000);
        }
        
        // ÿ±ÿ≥ŸÖ ÿßŸÑŸÑÿπÿ®ÿ©
        function drawGame() {
            // ÿÆŸÑŸÅŸäÿ© ÿ≥ŸàÿØÿßÿ°
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ÿ±ÿ≥ŸÖ ÿßŸÑÿ´ÿπÿ®ÿßŸÜ
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#4CAF50' : '#8BC34A';
                ctx.fillRect(
                    segment.x * gridSize, 
                    segment.y * gridSize, 
                    gridSize - 1, 
                    gridSize - 1
                );
                
                // ÿ±ÿ≥ŸÖ ÿßŸÑÿπŸäŸàŸÜ ŸÑŸÑÿ±ÿ£ÿ≥
                if (index === 0) {
                    ctx.fillStyle = '#000';
                    const eyeSize = 3;
                    if (dx === 1) { // ŸäŸÖŸäŸÜ
                        ctx.fillRect(
                            (segment.x * gridSize) + gridSize - 7, 
                            (segment.y * gridSize) + 5, 
                            eyeSize, 
                            eyeSize
                        );
                        ctx.fillRect(
                            (segment.x * gridSize) + gridSize - 7, 
                            (segment.y * gridSize) + gridSize - 9, 
                            eyeSize, 
                            eyeSize
                        );
                    } else if (dx === -1) { // Ÿäÿ≥ÿßÿ±
                        ctx.fillRect(
                            (segment.x * gridSize) + 4, 
                            (segment.y * gridSize) + 5, 
                            eyeSize, 
                            eyeSize
                        );
                        ctx.fillRect(
                            (segment.x * gridSize) + 4, 
                            (segment.y * gridSize) + gridSize - 9, 
                            eyeSize, 
                            eyeSize
                        );
                    } else if (dy === 1) { // ÿ£ÿ≥ŸÅŸÑ
                        ctx.fillRect(
                            (segment.x * gridSize) + 5, 
                            (segment.y * gridSize) + gridSize - 7, 
                            eyeSize, 
                            eyeSize
                        );
                        ctx.fillRect(
                            (segment.x * gridSize) + gridSize - 9, 
                            (segment.y * gridSize) + gridSize - 7, 
                            eyeSize, 
                            eyeSize
                        );
                    } else { // ŸÅŸàŸÇ
                        ctx.fillRect(
                            (segment.x * gridSize) + 5, 
                            (segment.y * gridSize) + 4, 
                            eyeSize, 
                            eyeSize
                        );
                        ctx.fillRect(
                            (segment.x * gridSize) + gridSize - 9, 
                            (segment.y * gridSize) + 4, 
                            eyeSize, 
                            eyeSize
                        );
                    }
                }
            });
            
            // ÿ±ÿ≥ŸÖ ÿßŸÑÿ∑ÿπÿßŸÖ
            ctx.fillStyle = '#FF5252';
            ctx.beginPath();
            ctx.arc(
                food.x * gridSize + gridSize/2, 
                food.y * gridSize + gridSize/2, 
                gridSize/2 - 2, 
                0, 
                Math.PI * 2
            );
            ctx.fill();
            
            // ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ∑ÿπÿßŸÖ
            ctx.strokeStyle = '#FF9800';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.arc(
                food.x * gridSize + gridSize/2, 
                food.y * gridSize + gridSize/2, 
                gridSize/2 + 2, 
                0, 
                Math.PI * 2
            );
            ctx.stroke();
        }
        
        // ÿ™ÿ∫ŸäŸäÿ± ÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿ´ÿπÿ®ÿßŸÜ
        function changeDirection(newDx, newDy) {
            if (!gameRunning || gamePaused) return;
            
            // ŸÖŸÜÿπ ÿßŸÑÿßŸÜÿπŸÉÿßÿ≥ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±
            if ((dx !== 0 && newDx !== 0) || (dy !== 0 && newDy !== 0)) return;
            
            dx = newDx;
            dy = newDy;
        }
        
        // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ∂ÿ∫ÿ∑ÿßÿ™ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
        function handleKeyPress(e) {
            if (!gameRunning || gamePaused) return;
            
            switch(e.key) {
                case 'ArrowUp':
                    changeDirection(0, -1);
                    break;
                case 'ArrowDown':
                    changeDirection(0, 1);
                    break;
                case 'ArrowLeft':
                    changeDirection(-1, 0);
                    break;
                case 'ArrowRight':
                    changeDirection(1, 0);
                    break;
                case ' ':
                    togglePause();
                    break;
            }
        }
        
        // ÿ•ŸäŸÇÿßŸÅ/ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑŸÑÿπÿ®ÿ©
        function togglePause() {
            if (!gameRunning) return;
            
            gamePaused = !gamePaused;
            if (gamePaused) {
                pauseBtn.innerHTML = '<i class="fas fa-play"></i> ŸÖÿ™ÿßÿ®ÿπÿ©';
            } else {
                pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ÿ•ŸäŸÇÿßŸÅ';
            }
        }
        
        // ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑŸÖŸÉÿßŸÅÿ¶
        function showAd() {
            clearInterval(adCountdown);
            adBtn.disabled = true;
            adBtn.innerHTML = '<i class="fas fa-sync fa-spin"></i> ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ...';
            
            // ŸÖÿ≠ÿßŸÉÿßÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿπŸÑÿßŸÜ
            show_9644756().then(() => {
                // ÿ®ÿπÿØ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜ
                adBtn.disabled = false;
                adBtn.innerHTML = '<i class="fas fa-ad"></i> ÿ¥ÿßŸáÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ¢ŸÜ';
                adContainer.style.display = "none";
                
                // ŸÖŸÜÿ≠ ŸÖŸÉÿßŸÅÿ£ÿ© (ÿ≠Ÿäÿßÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©)
                lives = 1;
                livesElement.textContent = lives;
                
                // ÿ®ÿØÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©
                startGame();
            });
        }
        
        // ÿØÿßŸÑÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑŸÖŸÉÿßŸÅÿ¶
        function show_9644756() {
            return new Promise((resolve) => {
                // ŸÖÿ≠ÿßŸÉÿßÿ© ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸÑŸÖÿØÿ© 3 ÿ´ŸàÿßŸÜŸä
                setTimeout(() => {
                    // ÿ™ŸÜŸÅŸäÿ∞ ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                    alert('ŸÑŸÇÿØ ÿ≠ÿµŸÑÿ™ ÿπŸÑŸâ ÿ≠Ÿäÿßÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©!');
                    resolve();
                }, 3000);
            });
        }
        
        // ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
        function showHelp() {
            alert("ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©:\n\n" +
                  "1. ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ£ÿ≥ŸáŸÖ ŸÑŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ´ÿπÿ®ÿßŸÜ\n" +
                  "2. ŸÉŸÑ ÿßŸÑÿ∑ÿπÿßŸÖ ÿßŸÑÿ£ÿ≠ŸÖÿ± ŸÑÿ≤ŸäÿßÿØÿ© ÿ∑ŸàŸÑŸÉ ŸàŸÜŸÇÿßÿ∑ŸÉ\n" +
                  "3. ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿßÿµÿ∑ÿØÿßŸÖ ÿ®ÿßŸÑÿ¨ÿØÿ±ÿßŸÜ ÿ£Ÿà ÿ®ÿ¨ÿ≥ŸÖŸÉ\n" +
                  "4. ŸÑÿØŸäŸÉ 3 ÿ≠Ÿäÿßÿ©ÿå ŸàÿπŸÜÿØ ŸÅŸÇÿØÿßŸÜŸáÿß ÿ¨ŸÖŸäÿπÿßŸã ŸäŸÖŸÉŸÜŸÉ ŸÖÿ¥ÿßŸáÿØÿ© ÿ•ÿπŸÑÿßŸÜ ŸÑÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿ≠Ÿäÿßÿ©\n" +
                  "5. ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± ÿßŸÑÿ•ŸäŸÇÿßŸÅ/ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ŸÑÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿ§ŸÇÿ™ÿßŸã");
        }
        
        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÑÿπÿ®ÿ© ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
        window.onload = init;
    </script>
</body>
</html>
